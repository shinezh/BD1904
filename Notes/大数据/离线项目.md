# 离线项目

## 项目环境

### 开发环境

- 样本数据

- 辅助 开发，开发过程便于代码调试

- 开发人员自己搭建，运维
- 安装集群，版本和生产集群可能有差别

### 测试环境

- 环境一定和生产环境一样
- 测试人员 维护

### 生产环境

- 测试成功之后，上生产上
- 运维人员管理

## 项目架构

### 三层架构

- 数据来源层
- 数据存储层
- 数据分析层
- 数据展现层

### 项目的技术选型

> 项目的每一层选用哪一个技术，调研

- 考虑
    - 技术前沿性
    - 技术稳定性
    - 人员储备



## 数据处理

```shell
194.237.142.21 - - [18/Sep/2013:06:49:18 +0000] "GET /wp-content/uploads/2013/07/rstudio-git3.png HTTP/1.1" 304 0 "-" "Mozilla/4.0 (compatible;)"
183.49.46.228 - - [18/Sep/2013:06:49:23 +0000] "-" 400 0 "-" "-"
163.177.71.12 - - [18/Sep/2013:06:49:33 +0000] "HEAD / HTTP/1.1" 200 20 "-" "DNSPod-Monitor/1.0"
```

```python
log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                    '$status $body_bytes_sent "$http_referer" '
                    '"$http_user_agent" "$http_x_forwarded_for"';
```



## 开发流程

### 数据采集

> 用户行为的日志数据 web server

- 日志形式

    - web服务器 tomcat

    - 埋点采集的日志

        - js代码埋点 前台

        - 后台埋点，跨域访问
        - 像素埋点

    - nginx日志
        - nginx概念：手段：反向代理，效果：负载均衡 高并发
        - 反向代理：代理服务器 为 webserver 代理
        - 正想代理：代理服务器 为 客户端

#### nginx日志采集









### 数据预处理

- 清洗 etl（）

### 数据入库

### hive 和 hbase整合

### 数据迁移

### 数据可视化展示